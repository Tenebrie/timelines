{
	"version": 4,
	"modno": 0,
	"instance": "timelines-backups",
	"repos": [
		{
			"id": "s3-rhea-postgres-backup",
			"uri": "${RESTIC_REPOSITORY}",
			"env": ["AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}", "AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}"],
			"password": "${RESTIC_PASSWORD}",
			"prunePolicy": {
				"maxUnusedPercent": 25
			},
			"autoInitialize": true
		}
	],
	"plans": [
		{
			"id": "rhea-postgres-backup",
			"repo": "s3-rhea-postgres-backup",
			"paths": ["/data/backup"],
			"excludes": [],
			"schedule": {
				"cron": "0 */1 * * *",
				"clock": "CLOCK_LOCAL"
			},
			"retention": {
				"policyTimeBucketed": {
					"keepLastN": 4,
					"hourly": 24,
					"daily": 7,
					"weekly": 4,
					"monthly": 12,
					"yearly": 3
				}
			},
			"hooks": [
				{
					"conditions": ["CONDITION_SNAPSHOT_START"],
					"actionCommand": {
						"command": "/scripts/pre-backup.sh"
					}
				}
			]
		}
	]
}
