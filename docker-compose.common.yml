version: "3.1"
services:
    gatekeeper:
        ports:
            - 80:80
            - 443:443
    styx:
        working_dir: /app/styx
        tty: true
        depends_on:
            - rhea
        ports:
            - 8080:8080
    rhea:
        working_dir: /app/rhea
        tty: true
        depends_on:
            - rhea-postgres
        ports:
            - 3000:3000
    rhea-postgres:
        image: postgres:11.5-alpine
        environment:
            POSTGRES_USER: docker
            POSTGRES_PASSWORD: docker
            POSTGRES_DB: db
        ports:
            - 5432:5432
    redis:
        image: redis:7-alpine
        ports:
          - "6379:6379"
        volumes:
            - ./redis:/redis
